# python_api
Чтобы запустить код введите соответствующую строку в терминал:
python upload2.py 

#Далее
Вам будет предложена возможность ввести id пользователя.
В терминале вы увидите:
"Введите ID пользователя: "
И после вводите нужный вам id

После этого, выведется сводная информация о записях в бд:
(Всего пользователей, Всего групп, Топ 5 самых популярных групп, Топ 5 пользователей по количеству подписчиков, Пользователи, которые подписаны друг на друга)


# Для работы с серверной частью приложения использовался фреймворк FastAPI

чтобы запустить приложение нужно ввести в терминал: uvicorn fastapi_app.app:app --reload

Далее описаны запросы на работу с данными:

Чтобы аунтетифицировать пользователя, необходимо выполнить post-запрос (/token)
Далее для post и delete запросов использовать токен: 555

1. Первый GET запрос на получение всех узлов с атрибутами id, label
@app.get("/nodes")

2. Второй GET запрос на получение узла и всех его связей с узлами на конце связей. Узлы и связи - со всемидоступными атрибутами
пример id: 238301909
@app.get("/nodesss")

3. POST запрос на добавление узла и связей и/или сегмента графа

передаем токен : 555
пример body:

{  "label": "User",
    "id": "1235",
    "name": "John Doe",
    "sex": "male",
    "home_town": "New York",
    "user_id": "8888",
    "group_id": "9999"}

4. DELETE запрос на удаление узла и связей и/или сегмента графа

пример данных удаления:

"node_id": "1235",
"user_id": "8888",
"group_id": "9999"

и токен 555

# Чтобы вызвать тесты, нужно ввести в консоль:

1. тест на получение всех узлов и связей:  pytest -s fastapi_app/tests.py::test_get_all_nodes
2. тест на получение узла и всех его связей с узлами на конце связей:  pytest -s fastapi_app/tests.py::test_get_node
3. тест на добавление узла и связей и/или сегмента графа:  pytest -s fastapi_app/tests.py::test_create_user
4. тест на удаление узла и связей и/или сегмента графа:pytest -s fastapi_app/tests.py::test_delete_user (ПО умолчанию поставлен id: 3. Можно через третий тест, создать пользователя с id: 3 по умолчанию, а после сразу вызвать тест на удаление)